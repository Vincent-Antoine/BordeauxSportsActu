{% extends 'base.html.twig' %}

{% block title %}R√©initialiser votre mot de passe{% endblock %}

{% block body %}
<div class="min-h-screen flex items-center justify-center bg-gray-100 py-6 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full bg-white shadow-md rounded-lg p-8">
        <h1 class="text-2xl text-gray-800 mb-6 text-center">R√©initialisation du mot de passe</h1>

        {% if error %}
            <div class="bg-red-100 text-red-600 p-4 rounded mb-4">
                {{ error }}
            </div>
        {% endif %}

        {% if success %}
            <div class="bg-green-100 text-green-600 p-4 rounded mb-4">
                {{ success }}
            </div>
        {% else %}
            {{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

            <div class="mb-2 text-sm text-gray-600">
                Le mot de passe doit contenir au minimum :
                <ul class="list-disc list-inside mt-1">
                    <li>8 caract√®res</li>
                    <li>1 majuscule</li>
                    <li>1 chiffre</li>
                </ul>
            </div>

<div class="relative">
    {{ form_label(form.plainPassword.first, 'Nouveau mot de passe', {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
    {{ form_widget(form.plainPassword.first, {
        'attr': {
            'class': 'appearance-none password-field rounded-md shadow-sm w-full px-3 py-2 border border-gray-300 placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500',
            'id': 'reset_password_input'
        }
    }) }}
    <button type="button" class="absolute right-3 top-9 text-gray-500 toggle-visibility">üëÅÔ∏è</button>
    {{ form_errors(form.plainPassword.first) }}
</div>


            <div class="relative">
                {{ form_label(form.plainPassword.second, 'Confirmation du mot de passe', {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
                {{ form_widget(form.plainPassword.second, {
                    'attr': {
                        'class': 'appearance-none password-field rounded-md shadow-sm w-full px-3 py-2 border border-gray-300 placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500',
                        'id': 'reset_password_confirm'
                    }
                }) }}
                {{ form_errors(form.plainPassword.second) }}
                <button type="button" class="absolute right-3 top-9 text-gray-500 toggle-visibility">üëÅÔ∏è</button>
            </div>

            <div>
                <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    R√©initialiser le mot de passe
                </button>
            </div>

            {{ form_end(form) }}
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.toggle-visibility').forEach(button => {
            button.addEventListener('click', () => {
                const input = button.previousElementSibling;
                input.type = input.type === 'password' ? 'text' : 'password';
            });
        });
    });
</script>
{% endblock %}
